/* :root Variables - 全局设计变量 */
:root {
  --primary-color: #007aff;
  --primary-rgb: 0, 122, 255;
  --secondary-color: #5856d6;
  --accent-color: #ff9500;
  --accent-color-rgb: 255, 149, 0;
  --success-color: #34c759;
  --error-color: #ff3b30;
  --info-color: #5ac8fa;
  --transition-duration: 300ms;
  --border-radius: 16px;
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;

  /* Opacity Variables - Added for customization */
  --background-opacity: 1.0;
  --card-opacity: 0.7;
  --navbar-opacity: 1.0;
  --success-color-rgb: 52, 199, 89; /* [新增这一行] */
}

/* --- Light Theme - 白天模式 --- */
body[data-theme="light"] {
  --bg-color-rgb: 247, 247, 249;
  --card-background-rgb: 255, 255, 255;
  --text-color: #1d1d1f;
  --text-secondary: #6e6e73;
  --border-color: rgba(0, 0, 0, 0.1);
  --shadow-color: rgba(0, 0, 0, 0.05);
  --shadow-color-hover: rgba(0, 0, 0, 0.15);
  --glow-color: rgba(var(--primary-rgb), 0.2);
  --tag-bg-color: rgba(0, 0, 0, 0.05);
}

/* --- Dark Theme - 黑夜模式 --- */
body[data-theme="dark"] {
  --bg-color-rgb: 22, 22, 24;
  --card-background-rgb: 29, 29, 31;
  --text-color: #f5f5f7;
  --text-secondary: #86868b;
  --border-color: rgba(255, 255, 255, 0.15);
  --shadow-color: rgba(0, 0, 0, 0.2);
  --shadow-color-hover: rgba(0, 0, 0, 0.4);
  --glow-color: rgba(var(--primary-rgb), 0.3);
  --tag-bg-color: rgba(255, 255, 255, 0.1);
}

/* --- General Styles & Transitions --- */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: var(--font-family);
}

html,
body {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  color: var(--text-color);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: transparent;
}

/* 更新 body#app-body 样式，使其成为一个透明的圆角容器 */
body#app-body {
  display: flex;
  position: relative;
  /* 为伪元素定位提供上下文 */
  border-radius: 12px;
  overflow: hidden;
  background: transparent;
  /* 自身保持透明 */
  transition: color var(--transition-duration) ease;
}

/* 新增伪元素，用于绘制背景和毛玻璃效果 */
body#app-body::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(var(--bg-color-rgb), var(--background-opacity));
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  z-index: -2;
  /* 确保它在所有内容甚至背景图层之后 */
  transition: background-color var(--transition-duration) ease;
}

/* --- Custom Background Layer --- */
#background-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: -1;
  /* z-index -1 会让它显示在伪元素之上，内容之下 */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition: opacity 0.5s ease-in-out;
}


button,
.card,
.nav-btn,
.window-control-btn,
.category-card,
.subcategory-card,
.tool-card {
  transition: all var(--transition-duration) cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* --- Enhanced Typography & Gradient Text --- */
h1,
h2,
h3 {
  letter-spacing: -0.01em;
  font-weight: 700;
  transition: color var(--transition-duration) ease;
}

h1 {
  font-size: 28px;
}

h2 {
  font-size: 22px;
}

p {
  color: var(--text-secondary);
  line-height: 1.6;
}

.gradient-text {
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.category-card:hover h2,
.tool-card:hover h2 {
  color: var(--primary-color);
}


/* Page Transition */
@keyframes contentFadeIn {
  from {
    opacity: 0;
    transform: translateY(15px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Splash Screen */
.splash-container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  background-color: rgba(var(--bg-color-rgb), 1);
}

.splash-logo {
  font-size: 50px;
  color: var(--primary-color);
  margin-bottom: 20px;
}

.splash-title {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 20px;
}

.splash-progress-container {
  width: 80%;
  max-width: 300px;
  height: 8px;
  background-color: var(--border-color);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 15px;
}

.splash-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  transition: width 0.4s ease;
}

.splash-status {
  font-size: 14px;
  color: var(--text-secondary);
}

/* Main Layout, Navbar, Title Bar */
.navbar {
  width: 70px;
  background-color: rgba(var(--card-background-rgb), var(--navbar-opacity));
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 0;
  border-right: 1px solid var(--border-color);
  z-index: 10;
  flex-shrink: 0;
  transition: background-color var(--transition-duration) ease;
}

.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background-color: transparent;
}

.nav-spacer {
  flex-grow: 1;
}

.title-bar {
  height: 40px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: 0 10px;
  -webkit-app-region: drag;
  z-index: 5;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.window-controls {
  display: flex;
  -webkit-app-region: no-drag;
}

.window-control-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  border-radius: 8px;
}

.window-control-btn:hover {
  background-color: var(--border-color);
}

#close-btn:hover,
#close-btn-offline:hover {
  background-color: var(--error-color);
  color: white;
}

.network-status {
  font-size: 18px;
  margin-bottom: 8px;
}

.network-status.online {
  color: var(--success-color);
}

.network-status.offline {
  color: var(--error-color);
}

.network-speed {
  font-size: 11px;
  color: var(--text-secondary);
  display: flex;
  align-items: center;
  gap: 4px;
  height: 20px;
}

.content-area {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
  height: calc(100vh - 40px);
}

.page-container {
  width: 100%;
  height: 100%;
}


/* --- Enhanced Button Styles & Ripple Effect --- */
.action-btn,
.control-btn,
.back-btn,
.update-button,
.view-subcategory-btn,
.page-btn {
  position: relative;
  overflow: hidden;
  -webkit-tap-highlight-color: transparent;
  transition: transform 0.2s cubic-bezier(0.22, 1, 0.36, 1), box-shadow 0.2s cubic-bezier(0.22, 1, 0.36, 1), background-color 0.2s ease;
}

.action-btn:hover:not(:disabled),
.control-btn:hover:not(:disabled),
.back-btn:hover,
.update-button:hover:not(:disabled),
.view-subcategory-btn:hover,
.page-btn:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px var(--shadow-color-hover);
}

.action-btn:active:not(:disabled),
.control-btn:active:not(:disabled),
.back-btn:active,
.update-button:active:not(:disabled),
.view-subcategory-btn:active,
.page-btn:active:not(:disabled) {
  transform: translateY(-1px) scale(0.98);
  box-shadow: 0 4px 10px var(--shadow-color-hover);
  transition-duration: 0.1s;
}

.action-btn.mini-btn {
  padding: 6px 12px;
  font-size: 14px;
  border-radius: 12px;
}

.ripple-effect {
  position: absolute;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.6);
  transform: scale(0);
  animation: ripple-animation 600ms linear;
  pointer-events: none;
}

@keyframes ripple-animation {
  to {
    transform: scale(4);
    opacity: 0;
  }
}


/* Nav Button Style */
.nav-btn {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background-color: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 20px;
  margin-bottom: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

.nav-btn:hover:not(.active) {
  background-color: var(--border-color);
  color: var(--primary-color);
  transform: scale(1.1);
}

.nav-btn.active {
  color: white;
  transform: scale(1);
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  animation: gradient-spin 5s linear infinite;
  background-size: 200% 200%;
  box-shadow: 0 6px 15px rgba(var(--primary-rgb), 0.4);
}

@keyframes gradient-spin {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

.nav-btn.active:hover {
  filter: brightness(1.2);
}

/* All Cards Style with Glow Effect */
.category-card,
.subcategory-card,
.tool-card,
.announcement-card,
.changelog-card,
.settings-section,
.welcome-card,
.dashboard-card {
  /* dashboard-card inherits base styles */
  background-color: rgba(var(--card-background-rgb), var(--card-opacity));
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  box-shadow: 0 4px 15px var(--shadow-color);
  transition: transform var(--transition-duration) ease, box-shadow var(--transition-duration) ease, border-color var(--transition-duration) ease, background-color var(--transition-duration) ease;
}

.category-card:hover,
.subcategory-card:hover,
.tool-card:hover:not(.disabled),
.welcome-card:hover,
.dashboard-card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 12px 25px var(--shadow-color-hover), 0 0 25px var(--glow-color);
  border-color: rgba(var(--primary-rgb), 0.4);
}

.category-card,
.subcategory-card,
.welcome-card,
.welcome-header,
.dashboard-card {
  opacity: 0;
  /* for entrance animation */
}

/* Category & Subcategory Card Specifics */
.category-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 24px;
}

.category-card {
  padding: 24px;
  text-align: center;
}

.category-icon {
  font-size: 28px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 15px;
  color: white;
  transition: transform var(--transition-duration) ease;
}

.category-card:hover .category-icon {
  transform: rotate(15deg) scale(1.1);
}

.subcategory-page-container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.subcategory-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  flex-grow: 1;
  overflow-y: auto;
  padding-right: 10px;
  align-content: start;
}

.subcategory-grid::-webkit-scrollbar {
  display: none;
}

.subcategory-grid {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.subcategory-card {
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.subcategory-thumbnail {
  width: 100%;
  height: 160px;
  overflow: hidden;
}

.subcategory-thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.subcategory-card:hover .subcategory-thumbnail img {
  transform: scale(1.05);
}

.subcategory-content {
  padding: 15px;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

.subcategory-content h3 {
  margin-bottom: 8px;
}

.subcategory-content p {
  flex-grow: 1;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  text-overflow: ellipsis;
  font-size: 14px;
}

.view-subcategory-btn {
  display: block;
  width: 100%;
  padding: 12px;
  background-color: transparent;
  border: none;
  border-top: 1px solid var(--border-color);
  color: var(--primary-color);
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
}

/* Media Viewer Layout */
.media-viewer {
  display: flex;
  flex-direction: column;
  height: 100%;
  animation: contentFadeIn 0.5s cubic-bezier(0.25, 0.8, 0.25, 1) forwards;
}

.media-viewer .section-header,
.media-viewer .media-controls {
  flex-shrink: 0;
}

.media-viewer .media-controls {
  margin-top: 20px;
}

.media-container {
  width: 100%;
  background-color: #000;
  border-radius: var(--border-radius);
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-color);
  flex-grow: 1;
  min-height: 0;
  transition: background-image 0.3s ease, filter 0.3s ease, transform 0.3s ease;
}

.media-content,
.media-loading {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.media-content img,
.media-content video {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  display: block;
}

.media-loading {
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgba(0, 0, 0, 0.5);
  flex-direction: column;
  gap: 15px;
  opacity: 1;
  transition: opacity 0.3s ease;
  z-index: 5;
}

.media-loading.hidden {
  opacity: 0;
  pointer-events: none;
}

.media-progress-container {
  width: 80%;
  max-width: 300px;
  height: 6px;
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
  overflow: hidden;
}

.media-progress-bar {
  height: 100%;
  width: 0%;
  background-color: var(--primary-color);
  border-radius: 3px;
  transition: width 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

/* 全局加载动画容器 */
.loading-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  text-align: center;
  gap: 20px;
}

/* 加载GIF动图样式 */
.loading-gif {
  max-width: 300px;
  width: 40vw;
  min-width: 150px;
  height: auto;
  object-fit: contain;
}

/* 加载动画下方的文字 */
.loading-text {
  color: var(--text-secondary);
  font-size: 16px;
  font-weight: 600;
  animation: contentFadeIn 0.5s;
}

/* 针对缩略图的加载动画覆盖层 */
.loading-spinner-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(var(--card-background-rgb), 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.3s ease;
  pointer-events: none;
  /* 确保覆盖层不影响鼠标事件 */
}

.loading-spinner-overlay .loading-gif {
  width: 50px;
  height: 50px;
  min-width: auto;
}

/* Button Base Styles */
.action-btn,
.control-btn,
.back-btn {
  border-radius: var(--border-radius);
  padding: 10px 18px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-weight: 600;
  font-size: 15px;
  border: none;
}

.action-btn {
  background-color: var(--primary-color);
  color: white;
}

.action-btn.error-btn {
  background-color: var(--error-color);
}

.control-btn,
.back-btn {
  background-color: var(--card-background);
  color: var(--text-color);
  border: 1px solid var(--border-color);
}

.control-btn:hover,
.back-btn:hover {
  border-color: rgba(var(--primary-rgb), 0.5);
}

.section-header {
  display: flex;
  align-items: center;
  margin-bottom: 30px;
  gap: 15px;
  flex-shrink: 0;
}

/* 新的设置页面主容器 */
/* 更新style.css中的设置页面样式 */
.settings-page-container {
  display: grid;
  grid-template-columns: 240px 1fr;
  gap: 24px;
  height: 100%;
  padding: 20px;
  box-sizing: border-box;
}

@media (max-width: 768px) {
  .settings-page-container {
    grid-template-columns: 1fr;
  }

  .settings-nav {
    width: 100%;
    margin-bottom: 20px;
  }
}

.settings-nav-group {
  margin-bottom: 30px;
}

.settings-nav-group-title {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-secondary);
  margin-bottom: 12px;
  padding-left: 15px;
}

.settings-search {
  padding: 10px 15px;
  margin-bottom: 20px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background-color: var(--card-background);
  color: var(--text-color);
  width: 100%;
  box-sizing: border-box;
}

.settings-content {
  background-color: var(--card-background);
  border-radius: var(--border-radius);
  padding: 30px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  overflow-y: auto;
}

.setting-item {
  margin-bottom: 24px;
  animation: fadeIn 0.3s ease;
}

.setting-item-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.setting-item-title {
  font-weight: 600;
  font-size: 16px;
}

.setting-item-description {
  color: var(--text-secondary);
  font-size: 14px;
  margin-bottom: 12px;
  max-width: 80%;
}

/* 左侧导航按钮 */
.settings-nav-item {
  width: 100%;
  padding: 12px 15px;
  border: none;
  background-color: transparent;
  color: var(--text-secondary);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  text-align: left;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.settings-nav-item:hover {
  background-color: var(--border-color);
  color: var(--text-color);
}

.settings-nav-item.active {
  background-color: var(--primary-color);
  color: white;
  box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3);
}

/* 右侧内容区 */
.settings-content {
  flex-grow: 1;
  overflow-y: auto;
  /* 只让右侧内容区滚动 */
  height: 100%;
}

/* 右侧的每个独立面板 */
.settings-panel {
  display: none;
  /* 默认隐藏 */
  animation: contentFadeIn 0.4s forwards;
}

.settings-panel.active {
  display: block;
  /* 点击导航后显示 */
}

.settings-panel .settings-section:not(:last-child) {
  margin-bottom: 20px;
}

.settings-panel .info-grid {
  grid-template-columns: 150px 1fr;
}

.settings-panel .info-grid.horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  border-bottom: none;
  padding: 10px 0;
}

.settings-panel .info-grid.horizontal .info-item {
  display: flex;
  flex-direction: column;
  background-color: var(--border-color);
  padding: 10px 15px;
  border-radius: 8px;
  flex-basis: 200px;
  flex-grow: 1;
}

.settings-panel .info-grid.horizontal .info-label {
  font-size: 13px;
}

.settings-panel .info-grid.horizontal .info-value {
  font-size: 16px;
  font-weight: 600;
}

/* 左下角的状态监控面板 */
#settings-status-panel {
  padding: 15px;
  margin-top: 20px;
  border-top: 1px solid var(--border-color);
}

.status-panel-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 15px;
  text-align: center;
}

.settings-section {
  padding: 24px;
  display: flex;
  flex-direction: column;
}

.settings-section h2 {
  margin-bottom: 20px;
  flex-shrink: 0;
}

.settings-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.info-row span:first-child {
  color: var(--text-secondary);
  font-weight: 500;
  margin-right: 15px;
}

.settings-section>*:last-child {
  border-bottom: none;
}

.about-buttons {
  display: flex;
  gap: 15px;
  margin-top: auto;
  padding-top: 15px;
}

.about-buttons .control-btn {
  flex: 1;
}

/* --- Collapsible Styles --- */
.collapsible-trigger {
  cursor: pointer;
}

.collapsible-trigger .icon-toggle {
  display: inline-block;
  margin-left: 10px;
  transition: transform var(--transition-duration) ease;
}

.collapsible-trigger .icon-toggle::before {
  content: '\f078';
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
}

.collapsible-trigger.expanded .icon-toggle {
  transform: rotate(-180deg);
}

.collapsible-content {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.35s ease-in-out;
  padding-left: 15px;
  border-top: 1px solid transparent;
}

.collapsible-content.expanded {
  max-height: 200px;
  border-top: 1px solid var(--border-color);
  margin-top: 12px;
}

.collapsible-content .settings-row {
  border-bottom: none;
  padding: 8px 0;
}

.collapsible-content .settings-row:first-child {
  padding-top: 12px;
}

/* Opacity Controls */
.opacity-control {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

.opacity-control input[type="range"] {
  flex: 1;
  transition: opacity 0.2s ease;
}

.opacity-control input[type="range"]:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.background-controls button {
  pointer-events: all;
}

/* Stats Card */
.stats-display {
  font-size: 28px;
  font-weight: 700;
  text-align: center;
  margin: auto 0;
}

.stats-label {
  text-align: center;
  color: var(--text-secondary);
}

/* Theme Switch */
.theme-switch {
  position: relative;
  display: inline-block;
  width: 56px;
  height: 30px;
}

.theme-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--border-color);
  transition: var(--transition-duration);
  border-radius: 30px;
  display: flex;
  align-items: center;
}

.slider:before {
  position: absolute;
  content: "";
  height: 22px;
  width: 22px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: var(--transition-duration);
  border-radius: 50%;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

input:checked+.slider:before {
  transform: translateX(26px);
}

input:checked+.slider {
  background-color: var(--primary-color);
}

.slider::after {
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  font-size: 14px;
  position: absolute;
  transition: all var(--transition-duration) ease;
}

body[data-theme="light"] .slider::after {
  content: '\f185';
  color: #f39c12;
  right: 8px;
}

body[data-theme="dark"] .slider::after {
  content: '\f186';
  color: #f1c40f;
  left: 8px;
}

/* Update Management Card (Internal Scroll) */
.update-section-content {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  min-height: 0;
}

#update-check-wrapper {
  text-align: center;
  padding-bottom: 20px;
  flex-shrink: 0;
}

#update-button {
  position: relative;
  width: 150px;
  height: 44px;
  border: none;
  border-radius: 22px;
  background-color: var(--primary-color);
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  overflow: hidden;
}

#update-button:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

#update-button.checking .scan-bar {
  display: block;
  animation: scan 1.5s ease-in-out infinite;
}

.scan-bar {
  display: none;
  position: absolute;
  top: 0;
  left: -50px;
  width: 40px;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  transform: skewX(-25deg);
}

@keyframes scan {
  from {
    left: -50px;
  }

  to {
    left: 160px;
  }
}

#update-info-container {
  flex-grow: 1;
  overflow-y: auto;
  padding: 0 10px;
  min-height: 0;
}

#update-info p.accent {
  color: var(--accent-color);
  font-weight: 600;
}

#update-info p.success {
  color: var(--success-color);
  font-weight: 600;
}

#update-info p.error {
  color: var(--error-color);
  font-weight: 600;
}

.update-notes-container {
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 15px;
  margin: 15px 0;
  background-color: rgba(var(--bg-color-rgb), 0.5);
}

.update-notes-list {
  list-style-type: none;
  padding-left: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.update-note-item {
  display: grid;
  grid-template-columns: 80px 1fr;
  gap: 10px;
  align-items: baseline;
  font-size: 14px;
}

.note-key {
  font-weight: 600;
  color: var(--text-secondary);
  text-align: right;
}

.note-value {
  text-align: left;
}

.update-actions {
  display: flex;
  gap: 15px;
  margin-top: 20px;
  justify-content: center;
}

/* New Update Download UI */
.update-download-ui {
  border: 1px solid var(--border-color);
  border-radius: 12px;
  padding: 20px;
  text-align: left;
}

.update-download-ui .version-tag {
  font-size: 16px;
  font-weight: bold;
  color: var(--primary-color);
  margin-bottom: 10px;
}

.update-download-ui .status-text {
  font-size: 14px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
}

.download-progress-bar-container {
  width: 100%;
  height: 10px;
  background-color: var(--border-color);
  border-radius: 5px;
  overflow: hidden;
  margin-bottom: 10px;
}

.download-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  transition: width 0.3s ease;
}

.download-controls {
  margin-top: 15px;
  display: flex;
  justify-content: center;
  gap: 15px;
}


/* Toast Notifications */
#toast-container {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column-reverse;
  align-items: flex-end;
  gap: 10px;
}

.toast-notification {
  min-width: 280px;
  max-width: 350px;
  background-color: rgba(var(--card-background-rgb), 0.8);
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  color: var(--text-color);
  padding: 12px 16px;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 15px var(--shadow-color);
  display: flex;
  align-items: center;
  gap: 12px;
  border: 1px solid var(--border-color);
  pointer-events: auto;
  opacity: 0;
  transform: translateY(20px);
  transition: transform 0.4s cubic-bezier(0.215, 0.610, 0.355, 1),
    opacity 0.4s cubic-bezier(0.215, 0.610, 0.355, 1);
}

.toast-notification.show {
  opacity: 1;
  transform: translateY(0);
}

.toast-notification .icon {
  font-size: 20px;
}

.toast-notification.success .icon {
  color: var(--success-color);
}

.toast-notification.error .icon {
  color: var(--error-color);
}

.toast-notification.info .icon {
  color: var(--info-color);
}

.toast-notification .content h4 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 2px;
  color: var(--text-color);
}

.toast-notification .content p,
.toast-notification .content div {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.3;
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--text-secondary);
}

/* --- Welcome Page / Dashboard Styles (Re-architected for Full Height) --- */
.welcome-dashboard {
  display: flex;
  flex-direction: column;
  gap: 20px;
  height: 100%;
  /* 核心：让仪表盘容器撑满父元素高度 */
}

.welcome-dashboard .welcome-header {
  text-align: left;
  flex-shrink: 0;
  /* 不允许头部被压缩 */
}

.welcome-dashboard .announcement-card {
  flex-shrink: 0;
  /* 不允许公告卡片被压缩 */
}

.welcome-dashboard .welcome-header p {
  font-size: 16px;
  margin-top: 5px;
}

/* -- Grid Layout: 占据剩余所有空间 -- */
.dashboard-grid {
  flex-grow: 1;
  min-height: 0;
  display: grid;
  gap: 20px;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto 1fr;
}

@media (max-width: 1024px) {

  /* 当屏幕宽度小于 1024px 时 */
  .dashboard-grid {
    /* 1. 变为单列布局 */
    grid-template-columns: 1fr;
    /* 2. 定义三行：系统概览(auto), 快捷启动(auto), 更新日志(1fr 占满剩余) */
    grid-template-rows: auto auto 1fr;
  }

  /* 确保更新日志卡片在单列时仍然横跨 (虽然默认就是 1fr，但显式声明更安全) */
  .dashboard-grid .changelog-card {
    grid-column: 1 / -1;
  }
}

.dashboard-card {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  /* 确保卡片本身不会出现滚动条 */
}

.dashboard-card .card-content {
  padding: 15px 20px;
  /* 减小内边距，为版本卡片争取空间 */
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
  /* 减小间距 */
}

.dashboard-card .info-row.compact {
  padding: 4px 0;
  border: none;
}

/* -- 让版本更新卡片横跨两列 -- */
.dashboard-grid .changelog-card {
  grid-column: 1 / -1;
  /* 横跨所有列 */
  min-height: 0;
  /* flex容器内的子项需要这个来正确计算高度 */
}

/* -- 使版本更新列表内部可以滚动 -- */
.dashboard-card .changelog-list {
  flex-grow: 1;
  /* 占据卡片内所有可用垂直空间 */
  overflow-y: auto;
  /* 内容超出时显示滚动条 */
  min-height: 0;
  /* 配合flex-grow，确保正确的高度约束 */
  padding: 0 20px 20px;
  margin-right: -10px;
  /* 优化滚动条视觉效果 */
  padding-right: 10px;
}

/* -- System Overview Card -- */
.system-overview-card .info-row span:first-child {
  color: var(--text-color);
}

/* -- Quick Launch Card -- */
.quick-launch-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  height: 100%;
}

.quick-launch-btn {
  background-color: transparent;
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
  border-radius: var(--border-radius);
  padding: 10px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: all 0.2s ease-in-out;
}

.quick-launch-btn i {
  font-size: 22px;
  color: var(--text-color);
  transition: color 0.2s ease-in-out;
}

.quick-launch-btn:hover {
  background-color: var(--border-color);
  color: var(--text-color);
  border-color: var(--primary-color);
}

.quick-launch-btn:hover i {
  color: var(--primary-color);
}

.welcome-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-color);
  flex-shrink: 0;
}

.welcome-card-header h2,
.welcome-card-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.announcement-content {
  padding: 24px;
}

.latest-tag {
  background-color: var(--success-color);
  color: white;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 600;
  border-radius: 20px;
}

.changelog-list {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.changelog-item {
  display: grid;
  grid-template-columns: 80px 1fr;
  align-items: baseline;
  gap: 15px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--border-color);
}

.changelog-item:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.changelog-key {
  font-weight: 600;
  color: var(--text-secondary);
  text-align: right;
  font-size: 14px;
  background-color: var(--tag-bg-color);
  padding: 4px 8px;
  border-radius: 6px;
  justify-self: end;
}

.changelog-value {
  font-size: 15px;
  color: var(--text-color);
  line-height: 1.5;
}

.version-display {
  position: fixed;
  bottom: 10px;
  right: 15px;
  font-size: 12px;
  color: var(--text-secondary);
  background-color: rgba(var(--card-background-rgb), var(--card-opacity));
  padding: 4px 8px;
  border-radius: 6px;
  border: 1px solid var(--border-color);
  z-index: 100;
}


/* Toolbox */
.toolbox-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 24px;
  /* margin-top: 40px; <-- 删除这一行 */
  justify-content: start;
  align-content: start;
}

.tool-card {
  padding: 24px;
  text-align: center;
  cursor: pointer;
}

.tool-card.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(80%);
}

.tool-card.disabled:hover {
  transform: none;
  box-shadow: 0 4px 15px var(--shadow-color);
  border-color: var(--border-color);
}

.tool-icon {
  font-size: 32px;
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 15px;
  color: white;
  transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.tool-card:hover .tool-icon {
  transform: rotate(15deg) scale(1.1);
}

.tool-card h2 {
  margin-bottom: 8px;
}

/* Pagination */
.pagination-container {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
  margin-top: 30px;
  flex-shrink: 0;
}

.page-btn {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background-color: var(--card-background);
  color: var(--text-color);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

.page-btn:hover:not(:disabled) {
  background-color: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.page-btn.active {
  background-color: var(--primary-color);
  color: white;
  border-color: var(--primary-color);
}

.page-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Media Viewer & Volume */
.media-controls {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-wrap: wrap;
}

.media-status-text {
  margin-left: auto;
  color: var(--text-secondary);
  font-size: 14px;
}

.volume-control {
  display: flex;
  align-items: center;
  gap: 10px;
  color: var(--text-secondary);
}

#volume-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 120px;
  height: 6px;
  background: var(--border-color);
  border-radius: 3px;
  outline: none;
}

#volume-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: var(--text-color);
  cursor: pointer;
  border-radius: 50%;
  border: 2px solid var(--card-background);
  transition: background-color 0.2s ease;
}

#volume-slider::-webkit-slider-thumb:hover {
  background: var(--primary-color);
}

#volume-slider::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: var(--text-color);
  cursor: pointer;
  border-radius: 50%;
  border: 2px solid var(--card-background);
}

/* Navigation Header */
.section-header {
  display: flex;
  align-items: center;
  margin-bottom: 30px;
  gap: 15px;
}

.section-header .back-btn {
  flex-shrink: 0;
}

.section-header h1 {
  flex-grow: 1;
  text-align: center;
  margin: 0;
  padding: 0 15px;
}

/* Logs Page Specifics */
.logs-header {
  justify-content: flex-start;
}

.logs-header h1 {
  text-align: left;
  flex-grow: 0;
  margin: 0;
}

.logs-header::after {
  display: none;
}

.logs-controls {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
}

.log-entry:last-child {
  border-bottom: none;
}

.log-timestamp {
  color: var(--text-secondary);
  font-family: monospace;
  font-size: 13px;
}

.log-tag {
  padding: 4px 10px;
  border-radius: 8px;
  font-size: 12px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background-color: var(--tag-bg-color);
}

.log-category-system {
  color: var(--info-color);
}

.log-category-navigation {
  color: var(--accent-color);
}

.log-category-ui {
  color: var(--secondary-color);
}

.log-category-media {
  color: #f51871;
}

.log-category-update {
  color: var(--success-color);
}

.log-category-settings {
  color: #a25aff;
}

.log-category-general {
  color: var(--text-secondary);
}

.log-category-error {
  color: var(--error-color);
}

.log-action {
  flex: 1;
  color: var(--text-color);
  word-break: break-all;
  white-space: pre-wrap;
}

.log-category-tool {
  color: #8e44ad;
  /* 紫色，代表工具 */
}

.log-category-sub {
  background-color: var(--border-color);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
}

.empty-logs-placeholder {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 60px 20px;
  color: var(--text-secondary);
}

.empty-logs-placeholder i {
  font-size: 40px;
  margin-bottom: 20px;
}

.empty-logs-placeholder p {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color);
}

.empty-logs-placeholder span {
  font-size: 13px;
  margin-top: 5px;
}

/* Offline Mode */
.offline-container {
  width: 100vw;
  height: 100vh;
  background: linear-gradient(-45deg, #131313, #2c3e50, #34495e, #131313);
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
}

@keyframes gradientBG {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

.title-bar-offline {
  height: 40px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: 0 10px;
  -webkit-app-region: drag;
}

.offline-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 20px;
  z-index: 2;
}

.offline-icon {
  font-size: 60px;
  color: var(--primary-color);
  margin-bottom: 30px;
  animation: float 3s ease-in-out infinite;
}

@keyframes float {
  0% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }

  100% {
    transform: translateY(0px);
  }
}

.offline-content h1 {
  font-size: 32px;
  color: white;
  margin-bottom: 15px;
}

.offline-content p {
  color: rgba(255, 255, 255, 0.7);
  max-width: 450px;
}

.offline-content .error-message {
  font-size: 12px;
  margin-top: 10px;
  color: var(--error-color);
}

.offline-content #relaunch-btn {
  margin-top: 30px;
}

.background-shapes .shape {
  position: absolute;
  border-radius: 50%;
  background: rgba(var(--primary-rgb), 0.1);
  animation: pulse 7s infinite ease-in-out;
}

.shape1 {
  width: 200px;
  height: 200px;
  top: 10%;
  left: 5%;
}

.shape2 {
  width: 100px;
  height: 100px;
  bottom: 15%;
  right: 10%;
  animation-delay: 2s;
}

.shape3 {
  width: 150px;
  height: 150px;
  top: 50%;
  right: 40%;
  animation-delay: 4s;
}

@keyframes pulse {
  0% {
    transform: scale(0.9);
  }

  50% {
    transform: scale(1.1);
  }

  100% {
    transform: scale(0.9);
  }
}

/* IP Query Tool Specific Styles */
.ip-input-group {
  display: flex;
  gap: 10px;
}

.ip-input-group input {
  flex-grow: 1;
  padding: 10px 15px;
  font-size: 16px;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  background-color: rgba(var(--card-background-rgb), 0.5);
  color: var(--text-color);
}

.ip-results-container {
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: 24px;
  background-color: rgba(var(--card-background-rgb), var(--card-opacity));
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.ip-result-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  width: 100%;
}

.ip-result-category {
  padding-left: 15px;
  border-left: 3px solid var(--primary-color);
}

.ip-result-category h3 {
  margin-bottom: 10px;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ip-result-item {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 14px;
  border-bottom: 1px solid var(--border-color);
}

.ip-result-item:last-child {
  border-bottom: none;
}

.ip-result-key {
  color: var(--text-secondary);
  font-weight: 500;
}

.ip-result-value {
  color: var(--text-color);
  font-weight: 600;
  text-align: right;
}

.privacy-warning {
  font-size: 12px;
  color: var(--accent-color);
  margin-top: 15px;
  padding: 10px;
  border-radius: 8px;
  background-color: rgba(var(--accent-color-rgb, 255, 149, 0), 0.1);
  border: 1px solid rgba(var(--accent-color-rgb, 255, 149, 0), 0.2);
}

.error-message {
  color: var(--error-color);
}

/* IP Query Tool - Comparison Table Styles */
.ip-comparison-container {
  margin-top: 24px;
  padding-top: 24px;
  border-top: 1px solid var(--border-color);
}

.ip-comparison-container h3 {
  margin-bottom: 15px;
  font-size: 18px;
}

.ip-comparison-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}

.ip-comparison-table th,
.ip-comparison-table td {
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

.ip-comparison-table th {
  color: var(--text-secondary);
  font-weight: 600;
}

.ip-comparison-table tbody tr:last-child td {
  border-bottom: none;
}

.ip-comparison-table td.inconsistent {
  color: var(--error-color);
  font-weight: 700;
}

.ip-comparison-table td.consistent {
  color: var(--text-color);
}

.comparison-note {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 10px;
  text-align: right;
}

/* --- 系统信息工具样式 --- */
.sys-info-tabs {
  display: flex;
  gap: 10px;
  border-bottom: 2px solid var(--border-color);
  margin-bottom: 20px;
}

.sys-info-tab {
  padding: 12px 20px;
  border: none;
  background-color: transparent;
  color: var(--text-secondary);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: color 0.3s ease;
}

.sys-info-tab::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: var(--primary-color);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.sys-info-tab:hover {
  color: var(--text-color);
}

.sys-info-tab.active {
  color: var(--primary-color);
}

.sys-info-tab.active::after {
  transform: scaleX(1);
}

.sys-info-content-container {
  padding: 10px;
}

.sys-info-content {
  display: none;
  animation: contentFadeIn 0.5s forwards;
}

.sys-info-content.active {
  display: block;
}

.info-grid {
  display: grid;
  grid-template-columns: 200px 1fr;
  border-bottom: 1px solid var(--border-color);
  padding: 15px 10px;
  font-size: 15px;
}

.info-grid:last-child {
  border-bottom: none;
}

.info-item {
  display: contents;
  /* 让子元素直接参与 grid 布局 */
}

.info-label {
  font-weight: 600;
  color: var(--text-secondary);
}

.info-value {
  word-break: break-all;
  color: var(--text-color);
}

.memory-bar-container {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

.memory-bar {
  height: 12px;
  flex-grow: 1;
  background-color: var(--border-color);
  border-radius: 6px;
  overflow: hidden;
}

.memory-bar>div {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 6px;
  transition: width 0.5s ease-out;
}

.network-card {
  background-color: rgba(var(--card-background-rgb), 0.5);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: 20px;
  margin-bottom: 15px;
}

.network-card h3 {
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.info-grid.compact {
  padding: 8px 0;
  grid-template-columns: 100px 1fr;
  border-bottom: 1px dashed var(--border-color);
}

.info-grid.compact:last-child {
  border-bottom: none;
}

/* IP Query Tool - Card Wrapper */
.ip-results-wrapper {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-top: 20px;
}

.ip-results-wrapper .settings-section {
  margin-bottom: 0;
}

.ip-results-wrapper .info-grid {
  grid-template-columns: 120px 1fr;
  padding-left: 0;
  padding-right: 0;
}

/* --- 系统信息工具样式 --- */
.sys-info-tabs {
  display: flex;
  gap: 10px;
  border-bottom: 2px solid var(--border-color);
  margin-bottom: 20px;
}

.sys-info-tab {
  padding: 12px 20px;
  border: none;
  background-color: transparent;
  color: var(--text-secondary);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: color 0.3s ease;
}

.sys-info-tab::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 2px;
  background-color: var(--primary-color);
  transform: scaleX(0);
  transition: transform 0.3s ease;
}

.sys-info-tab:hover {
  color: var(--text-color);
}

.sys-info-tab.active {
  color: var(--primary-color);
}

.sys-info-tab.active::after {
  transform: scaleX(1);
}

.sys-info-content-container {
  padding: 10px;
}

.sys-info-content {
  display: none;
  animation: contentFadeIn 0.5s forwards;
}

.sys-info-content.active {
  display: block;
}

.info-grid {
  display: grid;
  grid-template-columns: 200px 1fr;
  border-bottom: 1px solid var(--border-color);
  padding: 15px 10px;
  font-size: 15px;
}

.info-grid:last-child {
  border-bottom: none;
}

.info-item {
  display: contents;
}

.info-label {
  font-weight: 600;
  color: var(--text-secondary);
}

.info-value {
  word-break: break-all;
  color: var(--text-color);
}

.memory-bar-container {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
}

.memory-bar {
  height: 12px;
  flex-grow: 1;
  background-color: var(--border-color);
  border-radius: 6px;
  overflow: hidden;
}

.memory-bar>div {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 6px;
  transition: width 0.5s ease-out;
}

.network-card {
  background-color: rgba(var(--card-background-rgb), 0.5);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  padding: 20px;
  margin-bottom: 15px;
}

.network-card h3 {
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.info-grid.compact {
  padding: 8px 0;
  grid-template-columns: 100px 1fr;
  border-bottom: 1px dashed var(--border-color);
}

.info-grid.compact:last-child {
  border-bottom: none;
}

/* --- 新版设置页面样式 --- */
/* 新的设置页面主容器 */
.settings-page-container {
  display: flex;
  gap: 30px;
  /* 左右两栏的间距 */
  height: 100%;
  padding-right: 10px;
  /* 为右侧内容区预留滚动条空间 */
}

/* 左侧导航栏 */
.settings-nav {
  flex-shrink: 0;
  width: 200px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  /* 核心：将状态监控推到底部 */
  height: 100%;
}

/* 左侧导航按钮 */
.settings-nav-item {
  width: 100%;
  padding: 12px 15px;
  border: none;
  background-color: transparent;
  color: var(--text-secondary);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  border-radius: 12px;
  display: flex;
  align-items: center;
  gap: 12px;
  text-align: left;
  transition: background-color 0.2s ease, color 0.2s ease;
  position: relative;
  /* [新增] 使得 z-index 生效 */
  z-index: 2;
  /* [新增] 确保按钮内容在滑块之上 */
}

.settings-nav-item:hover {
  background-color: var(--border-color);
  color: var(--text-color);
}

.settings-nav-item.active {
  /* [删除] background-color: var(--primary-color); */
  color: white;
  /* [保留] 激活时文本为白色 */
  /* [删除] box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3); */
}

.settings-nav-item.active:hover {
  background-color: transparent;
  color: white;
}

.settings-content {
  flex-grow: 1;
  overflow-y: auto;
  /* 只让右侧内容区滚动 */
  height: 100%;
  padding-right: 10px;
}

/* 右侧的每个独立面板 */
.settings-panel {
  display: none;
  /* 默认隐藏 */
  animation: contentFadeIn 0.4s forwards;
}

.settings-panel.active {
  display: block;
  /* 点击导航后显示 */
}

.settings-panel .settings-section:not(:last-child) {
  margin-bottom: 20px;
}

.settings-panel .info-grid {
  grid-template-columns: 150px 1fr;
}

/* --- 追加以下新样式到文件末尾 --- */
.settings-panel .info-grid.horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  border-bottom: none;
  padding: 10px 0;
}

.settings-panel .info-grid.horizontal .info-item {
  display: flex;
  flex-direction: column;
  background-color: var(--border-color);
  padding: 10px 15px;
  border-radius: 8px;
  flex-basis: 200px;
  flex-grow: 1;
}

.settings-panel .info-grid.horizontal .info-label {
  font-size: 13px;
}

.settings-panel .info-grid.horizontal .info-value {
  font-size: 16px;
  font-weight: 600;
}

/* --- 设置页面实时状态面板 --- */
.settings-nav {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  /* 让状态面板推到底部 */
}

#settings-status-panel {
  padding: 15px;
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  background-color: rgba(var(--card-background-rgb), 0.5);
}

.status-panel-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 15px;
  padding-bottom: 5px;
  border-bottom: 1px solid var(--border-color);
}

.status-item {
  font-size: 13px;
  margin-bottom: 12px;
}

.status-item:last-child {
  margin-bottom: 0;
}

.status-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  color: var(--text-color);
}

.status-label span:last-child {
  font-weight: 600;
  color: var(--text-secondary);
}

.status-bar-container {
  width: 100%;
  height: 8px;
  background-color: var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.status-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 4px;
  transition: width 0.5s ease-out;
}

/* --- 找到并修改此规则 --- */
.settings-content .settings-grid {
  display: grid;
  /* 修改：使用更具响应性的布局，并限制卡片不会无限拉伸 */
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 20px;
  align-content: start;
  /* 让内容从顶部开始对齐 */
}

/* --- 在文件末尾追加以下新样式 --- */

/* 设置页面左侧导航栏的整体布局调整 */
.settings-nav {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  /* 核心改动：将内容推向两端 */
  height: 100%;
}

/* 实时状态面板样式 */
#settings-status-panel {
  padding: 15px;
  margin-top: 20px;
  /* 与上方按钮的间距 */
  border-top: 1px solid var(--border-color);
}

.status-panel-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 15px;
  text-align: center;
}

.status-item {
  font-size: 13px;
  margin-bottom: 15px;
}

.status-item:last-child {
  margin-bottom: 0;
}

.status-label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  color: var(--text-color);
}

.status-label span:last-child {
  font-weight: 600;
  color: var(--text-secondary);
  font-family: monospace;
}

.status-bar-container {
  width: 100%;
  height: 6px;
  background-color: var(--border-color);
  border-radius: 3px;
  overflow: hidden;
}

.status-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  border-radius: 3px;
  transition: width 0.5s ease-out;
}

.settings-panel .info-grid.horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  border-bottom: none;
  padding: 10px 0;
}

.settings-panel .info-grid.horizontal .info-item {
  display: flex;
  flex-direction: column;
  background-color: var(--border-color);
  padding: 10px 15px;
  border-radius: 8px;
  flex-basis: 200px;
  flex-grow: 1;
}

.settings-panel .info-grid.horizontal .info-label {
  font-size: 13px;
}

.settings-panel .info-grid.horizontal .info-value {
  font-size: 16px;
  font-weight: 600;
}

/* --- 新增 .toolbox-tabs --- */
.toolbox-tabs {
  flex-shrink: 0;
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  /* 防止换行 */
  scrollbar-width: thin;
  /* Firefox */
}

.toolbox-tabs::-webkit-scrollbar {
  height: 4px;
}

.toolbox-tabs::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border-radius: 2px;
}

/* --- 日志页面UI重构样式 --- */
.log-day-group {
  margin-bottom: 25px;
}

.log-day-group:last-child {
  margin-bottom: 0;
}

.log-date-header {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-color);
  padding-bottom: 12px;
  margin-bottom: 12px;
  border-bottom: 2px solid var(--border-color);
  position: sticky;
  top: -10px;
  /* 使其在滚动时能停靠在顶部 */
  background-color: rgba(var(--bg-color-rgb), 0.8);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  z-index: 1;
  padding-left: 15px;
}

.logs-container {
  padding: 10px 20px;
}

.log-entry {
  display: flex;
  align-items: center;
  gap: 15px;
  font-size: 14px;
  padding: 15px 10px;
  /* 增加垂直内边距 */
  border-bottom: 1px solid var(--border-color);
  /* 增加底部边框作为分隔符 */
  margin-bottom: 2px;
  /* 增加外边距 */
  border-left: 3px solid transparent;
  transition: border-left-color 0.3s ease, background-color 0.3s ease;
  /* 修正边距，使其与日期标题对齐 */
  margin-left: -15px;
  margin-right: -15px;
  padding-left: 15px;
}

.log-entry:hover {
  background-color: rgba(var(--primary-rgb), 0.05);
  border-left-color: var(--primary-color);
}


/* --- 日历 (input[type=date]) 样式美化 --- */
#log-date-picker {
  position: relative;
  background-color: var(--card-background);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  transition: border-color 0.3s ease;
}

#log-date-picker:hover {
  border-color: var(--primary-color);
}

/* 自定义日历图标 */
#log-date-picker::-webkit-calendar-picker-indicator {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 7a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1zm0 4a1 1 0 0 1 1-1h3a1 1 0 1 1 0 2H9a1 1 0 0 1-1-1zM5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5zm14 2H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill="currentColor"/></svg>');
  background-repeat: no-repeat;
  background-position: center;
  color: var(--text-secondary);
  opacity: 0.6;
  cursor: pointer;
  transition: opacity 0.3s ease;
}

#log-date-picker::-webkit-calendar-picker-indicator:hover {
  opacity: 1;
}

/* Bili Hot Tool Styles */
.bili-hot-table .rank-cell {
  display: none;
}

/* 移除旧的 title-cell 样式 */
.bili-hot-table .title-cell {
  display: contents;
  /* 或者直接删除此规则 */
}

/* 表格单元格的基础样式 */
.bili-hot-table td {
  padding: 8px 15px;
  /* 调整内边距 */
  vertical-align: middle;
}

/* 每一行热搜内容的容器，使用 Flex 布局 */
.bili-hot-item {
  display: flex;
  align-items: center;
  /* 垂直居中对齐 */
  gap: 15px;
  /* 项目之间的间距 */
  width: 100%;
}

/* 排名数字的样式 */
.bili-hot-rank {
  font-size: 1.2em;
  font-weight: 700;
  color: var(--text-secondary);
  width: 30px;
  /* 固定宽度，确保对齐 */
  text-align: center;
  flex-shrink: 0;
  /* 防止被压缩 */
}

/* 前三名排名的特殊颜色 */
.bili-hot-rank.rank-top-3 {
  color: var(--error-color);
}

.bili-hot-rank.rank-1 {
  font-size: 1.4em;
  /* 冠军可以更大一些 */
}

/* 热搜标题链接的样式 */
.bili-hot-title {
  flex-grow: 1;
  /* 占据所有剩余空间 */
  color: var(--text-color);
  text-decoration: none;
  font-weight: 500;
  line-height: 1.5;
  transition: color 0.2s ease;
}

.bili-hot-title:hover {
  color: var(--primary-color);
}

/* 热搜图片标签的样式 */
.bili-hot-image {
  height: 22px;
  /* 固定高度 */
  width: auto;
  /* 宽度自适应 */
  max-width: 50px;
  /* 限制最大宽度，防止图片过宽 */
  object-fit: contain;
  /* 保持图片比例 */
  flex-shrink: 0;
  /* 防止图片被压缩 */
  vertical-align: middle;
  /* 确保与文字基线对齐 */
}

/* 移除旧的 status-badge 样式，统一使用 bili-hot-image */
.bili-hot-table .status-badge {
  display: none;
}

.baidu-hot-tabs {
  margin-bottom: 10px;
  /* 调整标签页和下方内容的间距 */
  padding: 0 10px;
}

/* 自定义输入提示框样式 */
#custom-prompt-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(5px);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10000;
  animation: contentFadeIn 0.3s;
}

.custom-prompt-box {
  background-color: rgba(var(--card-background-rgb), 0.9);
  padding: 24px;
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  width: 90%;
  max-width: 350px;
  text-align: center;
}

.custom-prompt-box h4 {
  margin-bottom: 8px;
}

.custom-prompt-box p {
  margin-bottom: 16px;
  font-size: 14px;
}

.custom-prompt-box input {
  width: 100%;
  padding: 10px 15px;
  font-size: 16px;
  border: 1px solid var(--border-color);
  border-radius: 12px;
  background-color: rgba(var(--bg-color-rgb), 0.8);
  color: var(--text-color);
  margin-bottom: 20px;
  text-align: center;
}

.prompt-buttons {
  display: flex;
  justify-content: center;
  gap: 10px;
}

#custom-prompt-overlay.fade-out {
  animation: contentFadeOut 0.3s forwards;
}

@keyframes contentFadeOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(-15px);
  }
}

.secret-window-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.secret-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  box-sizing: border-box;
}

/* 确保所有子元素都能响应式调整 */
.secret-content>* {
  max-width: 100%;
  box-sizing: border-box;
}

/* 为工具箱网格容器添加一个平滑的透明度过渡效果 */
#toolbox-grid {
  transition: opacity 0.2s ease-in-out;
}

@keyframes contentFadeOut {
  from {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(-15px);
    /* 向上移动一点再消失，效果更佳 */
  }
}

.tool-card.fade-out {
  animation: contentFadeOut 0.2s forwards;
}

.tool-card {
  opacity: 0;
  /* 其他 .tool-card 样式保持不变 */
}

/* --- Base64 工具特定样式 --- */
.base64-tool-container .content-area {
  background-color: rgba(var(--bg-color-rgb), 0.5);
  /* 给内容区一个轻微的背景色 */
}

.base64-main-area h2,
.base64-image-area h2 {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.base64-textarea-wrapper {
  position: relative;
  margin-bottom: 15px;
}

#b64-main-textarea {
  width: 100%;
  height: 180px;
  /* 增加高度 */
  padding: 12px 15px;
  padding-right: 50px;
  /* 为右侧按钮留出空间 */
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  background-color: rgba(var(--card-background-rgb), 0.8);
  color: var(--text-color);
  font-size: 14px;
  resize: vertical;
  /* 允许垂直调整大小 */
  line-height: 1.6;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

#b64-main-textarea:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}

.textarea-actions {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.textarea-actions .control-btn.mini-btn {
  width: 30px;
  height: 30px;
  padding: 0;
  font-size: 14px;
  border-radius: 8px;
  /* 稍小圆角 */
}

.base64-actions {
  display: flex;
  gap: 15px;
  justify-content: center;
  /* 居中按钮 */
}

.base64-image-area .image-controls {
  display: flex;
  gap: 15px;
  margin-bottom: 15px;
}

.image-preview-area {
  border: 1px dashed var(--border-color);
  border-radius: var(--border-radius);
  padding: 15px;
  margin-top: 15px;
  text-align: center;
}

.image-preview-area h3 {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.image-output {
  margin-bottom: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100px;
}

#b64-download-image-btn {
  margin: 0 auto;
  /* 居中下载按钮 */
}

/* --- 窗口 UI 区分 --- */

/* 为独立窗口添加一个顶层类 */
body.tool-window-body,
body.browser-window-body {
  /* 可以给独立窗口加一个非常细微的边框或背景 */
  /* border: 1px solid rgba(var(--primary-rgb), 0.1); */
}

/* 独立窗口的标题栏样式调整 */
.tool-window-body .title-bar,
.browser-window-body .title-bar-shell {
  background-color: rgba(var(--card-background-rgb), 0.5);
  /* 半透明背景 */
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
  border-bottom: 1px solid var(--border-color);
}

/* 独立窗口内的工具头部 (例如 Base64 工具的) */
.tool-window-body .tool-window-header {
  padding: 10px 20px;
  /* 调整内边距 */
  margin-bottom: 0;
  /* 移除与下方内容的间距 */
  border-bottom: 1px solid var(--border-color);
  background-color: rgba(var(--card-background-rgb), 0.3);
  /* 轻微背景 */
}

.tool-window-body .tool-window-header .back-btn {
  /* 可以隐藏独立窗口内的返回按钮，因为窗口本身有关闭按钮 */
  /* display: none; */
  padding: 6px 12px;
  /* 缩小按钮 */
  font-size: 14px;
}

.tool-window-body .tool-window-header h1 {
  font-size: 18px;
  /* 缩小标题字号 */
}

/* 浏览器窗口的导航栏 */
.browser-window-body #view-controls {
  background-color: rgba(var(--card-background-rgb), 0.6);
  /* 稍微深一点的背景 */
}


/* --- 简繁转换工具特定样式 --- */
.chinese-converter-container .content-area {
  background-color: rgba(var(--bg-color-rgb), 0.5);
}

.chinese-converter-container .settings-section {
  min-height: 0;
  /* Allow flex shrinking */
}

.converter-text-area {
  position: relative;
  flex: 1;
  /* Allow text areas to grow */
  display: flex;
  /* Ensure textarea fills height */
  margin-bottom: 15px;
}

.converter-text-area textarea {
  width: 100%;
  min-height: 150px;
  /* Minimum height */
  height: 100%;
  /* Fill available height */
  padding: 12px 15px;
  padding-right: 50px;
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  background-color: rgba(var(--card-background-rgb), 0.8);
  color: var(--text-color);
  font-size: 14px;
  resize: vertical;
  line-height: 1.6;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.converter-text-area textarea:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}

.converter-text-area .textarea-actions {
  position: absolute;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.converter-text-area .textarea-actions .control-btn.mini-btn {
  width: 30px;
  height: 30px;
  padding: 0;
  font-size: 14px;
  border-radius: 8px;
}

.converter-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  flex-wrap: wrap;
  /* Allow wrapping on smaller screens */
  gap: 10px;
  flex-shrink: 0;
  /* Prevent controls from shrinking */
}

.converter-type-selection {
  display: flex;
  gap: 15px;
  align-items: center;
}

.converter-type-selection label {
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-secondary);
}

.converter-type-selection input[type="radio"] {
  cursor: pointer;
}

.converter-type-selection label:has(input:checked) {
  color: var(--primary-color);
  font-weight: 600;
}

#cc-convert-btn {
  min-width: 100px;
  /* Ensure button has minimum width */
}

#cc-output-textarea:read-only {
  background-color: rgba(var(--card-background-rgb), 0.5);
  /* Slightly different background for readonly */
}


/* --- QR Code Generator Tool Styles --- */
.qr-code-container .content-area {
  display: flex;
  flex-direction: row;
  /* Side by side layout */
  gap: 30px;
}

.qr-options-panel,
.qr-preview-panel {
  padding: 20px;
  flex: 1;
  /* Share space equally */
  display: flex;
  flex-direction: column;
  min-width: 0;
  /* Prevent flex overflow */
}

.qr-options-panel .setting-item {
  margin-bottom: 18px;
}

.qr-options-panel .setting-item label {
  display: block;
  /* Ensure label is above input */
  margin-bottom: 8px;
}

.qr-options-panel textarea,
.qr-options-panel select,
.qr-options-panel input[type="color"] {
  width: 100%;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
  background-color: rgba(var(--card-background-rgb), 0.7);
  color: var(--text-color);
  font-size: 14px;
}

.qr-options-panel textarea {
  min-height: 80px;
}

.qr-options-panel input[type="color"] {
  height: 38px;
  padding: 4px;
  /* Adjust padding for color input */
  cursor: pointer;
}


.qr-preview-panel {
  align-items: center;
  /* Center content horizontally */
}

.qr-code-output {
  width: 100%;
  max-width: 400px;
  /* Limit max preview size */
  aspect-ratio: 1 / 1;
  /* Maintain square shape */
  background-color: rgba(var(--card-background-rgb), 0.3);
  border: 1px dashed var(--border-color);
  border-radius: var(--border-radius);
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 20px;
  padding: 15px;
  /* Padding around the QR code */
  box-sizing: border-box;
  /* Include padding in size */
}

.qr-code-output canvas,
.qr-code-output img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  background-color: white;
  /* Ensure light background for QR code visibility */
  border-radius: 4px;
  /* Slight rounding for the code itself */
}


.qr-placeholder {
  color: var(--text-secondary);
  text-align: center;
}

#qr-save-btn {
  width: 80%;
  max-width: 200px;
  /* Limit button width */
}

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
  .qr-code-container .content-area {
    flex-direction: column;
    /* Stack panels vertically */
  }

  .qr-options-panel,
  .qr-preview-panel {
    flex: none;
    /* Reset flex grow */
  }
}

/* 工具箱新布局容器 */
.toolbox-page-container {
  padding-top: 20px;
  padding-bottom: 20px;
  gap: 20px;
}

/* 工具箱侧边栏 (复用设置页的导航样式) */
.toolbox-sidebar {
  width: 200px;
  flex-shrink: 0;
  height: 100%;
  overflow-y: auto;
  padding-right: 10px;
  /* 为滚动条留出空间 */
}

/* 侧边栏类别按钮 (直接复用 settings-nav-item 样式) */
.toolbox-category-btn {
  width: 100%;
  margin-bottom: 8px;
  /* 增加一点间距 */
}

/* 确保 .settings-nav-item 的基础样式在 .toolbox-sidebar 中可用 */
.toolbox-sidebar .settings-nav-item {
  /* 样式已在 .settings-nav-item 中定义，这里确保上下文正确 */
}

.toolbox-sidebar .settings-nav-item:hover {
  /* 样式已在 .settings-nav-item:hover 中定义 */
}

.toolbox-sidebar .settings-nav-item.active {
  /* 样式已在 .settings-nav-item.active 中定义 */
}

/* 工具箱右侧主内容区 */
.toolbox-main-content {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  /* 防止 flex 溢出 */
}

/* 确保网格在 flex 容器内正确滚动 */
.toolbox-main-content .toolbox-grid {
  flex-grow: 1;
  min-height: 0;
  overflow-y: auto;
  padding: 5px 15px 5px 5px;
  /* 为滚动条增加内边距 */
}

/* 工具箱活动滑块样式 */
.toolbox-active-slider {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  z-index: 1;
  /* 在按钮背景之下 */
  background-color: var(--primary-color);
  box-shadow: 0 4px 10px rgba(var(--primary-rgb), 0.3);
  border-radius: 12px;
  transition: transform 0.35s cubic-bezier(0.25, 0.8, 0.25, 1);
  /* 核心动画 */
}

/* 修正按钮内图标和文字的 z-index */
.settings-nav-item>i,
.settings-nav-item>span {
  position: relative;
  z-index: 2;
}

/* 独立工具窗口焦点样式 */
.tool-window-body .title-bar {
  background-color: rgba(var(--card-background-rgb), 0.5);
  transition: background-color 0.3s ease, color 0.3s ease;
}

.tool-window-body #window-title {
  transition: color 0.3s ease;
}

/* 当 .tool-window-body 获得焦点时 */
.tool-window-body.window-focused .title-bar {
  background-color: rgba(var(--primary-rgb), 0.15);
  /* 主题色浅色背景 */
  backdrop-filter: blur(10px);
}

.tool-window-body.window-focused #window-title {
  color: var(--primary-color);
  /* 主题色标题 */
}


/* 独立浏览器窗口焦点样式 */
.browser-window-body .title-bar-shell {
  background-color: rgba(var(--card-background-rgb), 0.5);
  transition: background-color 0.3s ease;
}

.browser-window-body #window-title {
  transition: color 0.3s ease;
}

/* 当 .browser-window-body 获得焦点时 */
.browser-window-body.window-focused .title-bar-shell {
  background-color: rgba(var(--primary-rgb), 0.15);
  /* 主题色浅色背景 */
  backdrop-filter: blur(10px);
}

.browser-window-body.window-focused #window-title {
  color: var(--primary-color);
  /* 主题色标题 */
}

/* 独立工具窗口 (view-tool) 基础样式 */
.tool-window-body#app-body {
  /* 添加过渡效果，用于焦点的边框/阴影 */
  transition: box-shadow 0.3s ease;
  /* 默认的、非激活状态的边框 (非常淡) */
  box-shadow: 0 0 0 1px var(--border-color);
}

.tool-window-body .title-bar {
  background-color: rgba(var(--card-background-rgb), 0.5);
  transition: background-color 0.3s ease, color 0.3s ease;
}

.tool-window-body #window-title {
  color: var(--text-secondary);
  /* 非激活时标题颜色变暗 */
  transition: color 0.3s ease;
}

/* 当 .tool-window-body 获得焦点时 */
.tool-window-body.window-focused#app-body {
  /* [新增] 添加高亮的边框/辉光效果 */
  box-shadow: 0 0 0 2px var(--primary-color);
}

.tool-window-body.window-focused .title-bar {
  background-color: rgba(var(--primary-rgb), 0.15);
  /* 主题色浅色背景 */
  backdrop-filter: blur(10px);
}

.tool-window-body.window-focused #window-title {
  color: var(--primary-color);
  /* 主题色标题 */
}


/* 独立浏览器窗口 (view-browser) 基础样式 */
.browser-window-body#app-body {
  transition: box-shadow 0.3s ease;
  box-shadow: 0 0 0 1px var(--border-color);
  /* 默认的、非激活状态的边框 */
}

.browser-window-body .title-bar-shell {
  background-color: rgba(var(--card-background-rgb), 0.5);
  transition: background-color 0.3s ease;
}

.browser-window-body #window-title {
  color: var(--text-secondary);
  /* 非激活时标题颜色变暗 */
  transition: color 0.3s ease;
}

/* 当 .browser-window-body 获得焦点时 */
.browser-window-body.window-focused#app-body {
  /* [新增] 添加高亮的边框/辉光效果 */
  box-shadow: 0 0 0 2px var(--primary-color);
}

.browser-window-body.window-focused .title-bar-shell {
  background-color: rgba(var(--primary-rgb), 0.15);
  backdrop-filter: blur(10px);
}

.browser-window-body.window-focused #window-title {
  color: var(--primary-color);
  /* 主题色标题 */
}

/* [修复] 移除工具窗口内的 header 留白 (如果工具文件没改干净) */
.tool-window-body .tool-window-header {
  display: none;
}

/* 禁用状态下的子分类卡片 */
.subcategory-card.disabled {
  opacity: 0.6;
  filter: grayscale(80%);
}

/* 禁用时移除悬停效果 */
.subcategory-card.disabled:hover {
  transform: none;
  box-shadow: 0 4px 15px var(--shadow-color);
  border-color: var(--border-color);
}

/* 禁用时按钮的样式 */
.subcategory-card.disabled .view-subcategory-btn {
  cursor: not-allowed;
  color: var(--text-secondary);
  background-color: transparent;
}

/* 禁用时移除按钮的悬停效果 */
.subcategory-card.disabled .view-subcategory-btn:hover {
  transform: none;
  box-shadow: none;
  color: var(--text-secondary);
}

/* 随机放映室 - 禁用项目的缩略图占位符 */
.subcategory-thumbnail-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--border-color);
  /* 使用一个柔和的背景色 */
}

.subcategory-thumbnail-placeholder i {
  font-size: 48px;
  color: var(--text-secondary);
  opacity: 0.5;
}

/* 确保禁用的卡片缩略图容器高度一致 */
.subcategory-card.disabled .subcategory-thumbnail {
  height: 160px;
  /* 匹配 .subcategory-thumbnail 的原始高度 */
  overflow: hidden;
}

/* --- 新的通用选项开关 (.option-toggle) --- */
.option-toggle {
  position: relative;
  display: inline-block;
  width: 44px;
  /* 宽度缩小 */
  height: 24px;
  /* 高度缩小 */
}

.option-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.option-toggle .slider-round {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--border-color);
  transition: var(--transition-duration);
  border-radius: 24px;
  /* 保持圆形 */
}

.option-toggle .slider-round:before {
  position: absolute;
  content: "";
  height: 18px;
  /* 滑块缩小 */
  width: 18px;
  /* 滑块缩小 */
  left: 3px;
  /* 边距调整 */
  bottom: 3px;
  /* 边距调整 */
  background-color: white;
  transition: var(--transition-duration);
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.option-toggle input:checked+.slider-round {
  background-color: var(--primary-color);
}

.option-toggle input:checked+.slider-round:before {
  transform: translateX(20px);
  /* 移动距离调整 */
}

/* --- 新的自定义下拉菜单 (.custom-select-wrapper) --- */
.custom-select-wrapper {
  position: relative;
  min-width: 120px;
}

.custom-select-trigger {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background-color: rgba(var(--card-background-rgb), 0.7);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  cursor: pointer;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-color);
}

.custom-select-wrapper:hover .custom-select-trigger {
  border-color: var(--primary-color);
}

.custom-select-wrapper.active .custom-select-trigger {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}

.custom-select-arrow {
  color: var(--text-secondary);
  transition: transform 0.3s ease;
}

.custom-select-wrapper.active .custom-select-arrow {
  transform: rotate(180deg);
}

.custom-select-options {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  z-index: 1000;
  background-color: rgba(var(--card-background-rgb), 0.9);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  box-shadow: 0 8px 20px var(--shadow-color-hover);
  padding: 6px;
  max-height: 200px;
  overflow-y: auto;

  /* [动画] 默认隐藏 */
  opacity: 0;
  transform: translateY(-10px);
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
}

.custom-select-wrapper.active .custom-select-options {
  /* [动画] 激活时显示 */
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

.custom-select-option {
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-secondary);
  transition: background-color 0.2s ease, color 0.2s ease;
}

.custom-select-option:hover {
  background-color: var(--border-color);
  color: var(--text-color);
}

.custom-select-option:active {
  background-color: rgba(var(--primary-rgb), 0.2);
  color: var(--primary-color);
}

/* 敏感词检测工具 - 结果列表滚动 */
.profanity-results-list {
  max-height: 150px;
  /* 滚动容器的最大高度 */
  overflow-y: auto;
  /* 溢出时显示滚动条 */
  border: 1px solid var(--border-color);
  border-radius: var(--border-radius);
  margin-top: 15px;
  /* 与状态行保持间距 */
}

/* [新增] flexbox 容器样式 */
.profanity-tag-container {
  display: flex;
  flex-wrap: wrap;
  /* 允许卡片换行 */
  padding: 10px;
  /* 容器内边距 */
  gap: 8px;
  /* 卡片之间的间距 */
}

/* [新增] “小卡片” (Tag/Pill) 本身的样式 */
.profanity-tag {
  /* 使用 rgba(var(--error-color-rgb...)) 来获取透明背景 */
  background-color: rgba(var(--error-color-rgb, 255, 59, 48), 0.15);
  color: var(--error-color);
  /* 红色文字 */
  padding: 5px 10px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  border: 1px solid rgba(var(--error-color-rgb, 255, 59, 48), 0.3);
}

/* 确保表格最后一行没有多余的边框 */
.profanity-results-list .ip-comparison-table tbody tr:last-child td {
  border-bottom: none;
}

/* --- 3. 自定义下拉菜单 (支持分类) --- */
.custom-select-group {
  padding: 4px 0;
}

.custom-select-group:not(:last-child) {
  border-bottom: 1px solid var(--border-color);
}

.custom-select-group-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 8px 12px 4px 12px;
}

.custom-select-options {
  /* 增加最大高度以容纳更多条目 */
  max-height: 400px;
}

/* --- 多平台热榜工具样式 --- */
.hotboard-table .bili-hot-item {
  display: none;
  /* 不再使用 .bili-hot-item flex 容器 */
}

/* 新的热榜标题链接样式 */
.hotboard-title-link {
  color: var(--text-color);
  text-decoration: none;
  font-weight: 500;
  line-height: 1.5;
  transition: color 0.2s ease;
}

.hotboard-title-link:hover {
  color: var(--primary-color);
}

/* 热榜 - 热度值 */
.hotboard-value {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  font-family: monospace;
  /* 使用等宽字体让数字对齐 */
}

/* 热榜 - 额外标签 (如 '新', '爆') */
.hotboard-tag {
  padding: 2px 6px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 700;
  margin-left: 8px;
  flex-shrink: 0;
  border: 1px solid transparent;
}

/* 标签 '新' (蓝色) */
.hotboard-tag.tag-new {
  background-color: rgba(var(--primary-rgb), 0.15);
  color: var(--primary-color);
  border-color: rgba(var(--primary-rgb), 0.3);
}

/* 标签 '爆' / '热' (红色) */
.hotboard-tag.tag-hot {
  background-color: rgba(var(--error-color-rgb, 255, 59, 48), 0.15);
  color: var(--error-color);
  border-color: rgba(var(--error-color-rgb, 255, 59, 48), 0.3);
}

/* 确保复用的表格样式在工具窗口中表现一致 */
.hotboard-table.ip-comparison-table th {
  text-align: left;
  /* 默认左对齐 */
}

.hotboard-table.ip-comparison-table th[style*="text-align: center"],
.hotboard-table.ip-comparison-table td[style*="text-align: center"] {
  text-align: center;
  /* 覆盖为居中 */
}

.hotboard-table.ip-comparison-table th[style*="text-align: right"],
.hotboard-table.ip-comparison-table td[style*="text-align: right"] {
  text-align: right;
  /* 覆盖为居右 */
}

/* --- 自定义“吃豆人”加载动画 (hotboard) --- */
/* (基于 .load20 样式) */
.pacman-loader {
	position: relative;
    /* 缩放以适应加载容器 */
    transform: scale(0.8);
    margin: 15px 0;
}
.pacman-loader>div:nth-child(2) {
	-webkit-animation: pacman-balls 1s -0.99s infinite linear;
	animation: pacman-balls 1s -0.99s infinite linear;
}
.pacman-loader>div:nth-child(3) {
	-webkit-animation: pacman-balls 1s -0.66s infinite linear;
	animation: pacman-balls 1s -0.66s infinite linear;
}
.pacman-loader>div:nth-child(4) {
	-webkit-animation: pacman-balls 1s -0.33s infinite linear;
	animation: pacman-balls 1s -0.33s infinite linear;
}
.pacman-loader>div:nth-child(5) {
	-webkit-animation: pacman-balls 1s 0s infinite linear;
	animation: pacman-balls 1s 0s infinite linear;
}
.pacman-loader>div:first-of-type {
	width: 0px;
	height: 0px;
	border-right: 25px solid transparent;
	/* [修改] 使用 CSS 变量自动适应主题 */
	border-top: 25px solid var(--text-color);
	border-left: 25px solid var(--text-color);
	border-bottom: 25px solid var(--text-color);
	border-radius: 25px;
	-webkit-animation: rotate_pacman_half_up 0.5s 0s infinite;
	animation: rotate_pacman_half_up 0.5s 0s infinite;
	position: relative;
	left: -30px;
}
.pacman-loader>div:nth-child(2) {
	width: 0px;
	height: 0px;
	border-right: 25px solid transparent;
	/* [修改] 使用 CSS 变量自动适应主题 */
	border-top: 25px solid var(--text-color);
	border-left: 25px solid var(--text-color);
	border-bottom: 25px solid var(--text-color);
	border-radius: 25px;
	-webkit-animation: rotate_pacman_half_down 0.5s 0s infinite;
	animation: rotate_pacman_half_down 0.5s 0s infinite;
	margin-top: -50px;
	position: relative;
	left: -30px;
}
.pacman-loader>div:nth-child(3),
.pacman-loader>div:nth-child(4),
.pacman-loader>div:nth-child(5),
.pacman-loader>div:nth-child(6) {
	/* [修改] 使用 CSS 变量自动适应主题 */
	background-color: var(--text-color);
	width: 15px;
	height: 15px;
	border-radius: 100%;
	margin: 2px;
	width: 10px;
	height: 10px;
	position: absolute;
	-webkit-transform: translate(0, -6.25px);
	transform: translate(0, -6.25px);
	top: 25px;
	left: 70px;
}

/* 复制所有必需的 keyframes */
@-webkit-keyframes pacman-balls {
	75% {
		opacity: 0.7;
	}
	100% {
		-webkit-transform: translate(-100px, -6.25px);
		transform: translate(-100px, -6.25px);
	}
}
@keyframes pacman-balls {
	75% {
		opacity: 0.7;
	}
	100% {
		-webkit-transform: translate(-100px, -6.25px);
		transform: translate(-100px, -6.25px);
	}
}
@-webkit-keyframes rotate_pacman_half_down {
	0% {
		-webkit-transform: rotate(90deg);
		transform: rotate(90deg);
	}
	50% {
		-webkit-transform: rotate(0deg);
		transform: rotate(0deg);
	}
	100% {
		-webkit-transform: rotate(90deg);
		transform: rotate(90deg);
	}
}
@keyframes rotate_pacman_half_down {
	0% {
		-webkit-transform: rotate(90deg);
		transform: rotate(90deg);
	}
	50% {
		-webkit-transform: rotate(0deg);
		transform: rotate(0deg);
	}
	100% {
		-webkit-transform: rotate(90deg);
		transform: rotate(90deg);
	}
}
@-webkit-keyframes rotate_pacman_half_up {
	0% {
		-webkit-transform: rotate(270deg);
		transform: rotate(270deg);
	}
	50% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
	100% {
		-webkit-transform: rotate(270deg);
		transform: rotate(270deg);
	}
}
@keyframes rotate_pacman_half_up {
	0% {
		-webkit-transform: rotate(270deg);
		transform: rotate(270deg);
	}
	50% {
		-webkit-transform: rotate(360deg);
		transform: rotate(360deg);
	}
	100% {
		-webkit-transform: rotate(270deg);
		transform: rotate(270deg);
	}
}