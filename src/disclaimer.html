<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>用户协议</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="./css/style.css">
    <style>
        body {
            margin: 0;
            padding: 10px; /* 给阴影留空间 */
            height: 100vh;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-family: var(--font-family);
        }
        
        .disclaimer-island {
            width: 100%;
            height: 100%;
            background: rgba(var(--card-background-rgb), 0.95);
            backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(128, 128, 128, 0.15);
            border-radius: 24px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            -webkit-app-region: drag; /* 允许拖动窗口 */
        }

        .header {
            padding: 25px 25px 10px 25px;
            text-align: center;
            flex-shrink: 0;
        }

        .icon-box {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px auto;
            box-shadow: 0 8px 20px rgba(var(--primary-rgb), 0.3);
        }

        h2 { margin: 0 0 5px 0; font-size: 20px; color: var(--text-color); }
        p.subtitle { margin: 0; font-size: 13px; color: var(--text-secondary); opacity: 0.8; }

        .content {
            flex-grow: 1;
            padding: 10px 25px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.7;
            color: var(--text-color);
            text-align: justify;
            -webkit-app-region: no-drag; /* 内容区不可拖动以允许选择 */
        }
        
        /* 滚动条隐藏 */
        .content::-webkit-scrollbar { width: 4px; }
        .content::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 2px; }

        .footer {
            padding: 20px 25px;
            display: flex;
            gap: 15px;
            background: linear-gradient(to top, rgba(var(--bg-color-rgb), 0.5), transparent);
            -webkit-app-region: no-drag;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border-radius: 14px;
            border: none;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-quit {
            background: rgba(var(--text-color), 0.05);
            color: var(--text-secondary);
        }
        .btn-quit:hover { background: rgba(var(--error-color-rgb), 0.1); color: var(--error-color); }

        .btn-agree {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 5px 15px rgba(var(--primary-rgb), 0.3);
        }
        .btn-agree:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(var(--primary-rgb), 0.4); }

        /* 段落间距 */
        p { margin-bottom: 12px; }
        strong { color: var(--primary-color); }
    </style>
</head>
<body data-theme="dark">
    <div class="disclaimer-island">
        <div class="header">
            <div class="icon-box"><i class="fas fa-shield-alt"></i></div>
            <h2>服务协议与免责声明</h2>
            <p class="subtitle">请仔细阅读以下条款</p>
        </div>
        
        <div class="content">
            <p>欢迎使用 <strong>YMhut Box</strong>。本软件是一款由个人开发的<strong>非盈利性</strong>系统工具箱。</p>
            <p>1. <strong>数据来源说明</strong><br>本软件集成的部分功能（如天气查询、热榜、IP归属等）通过公开网络接口聚合数据。软件本身不生产数据，亦不对第三方数据的准确性、及时性或合法性承担责任。</p>
            <p>2. <strong>合法使用承诺</strong><br>请确保您在遵守当地法律法规的前提下使用本软件。严禁利用本软件提供的网络工具进行任何非法的扫描、攻击或侵入行为。用户需对自己的行为承担全部法律责任。</p>
            <p>3. <strong>免责条款</strong><br>作者不对因使用本软件及其功能而导致的任何直接或间接损失（包括但不限于数据丢失、系统故障、业务中断）负责。软件按“原样”提供，不包含任何明示或暗示的担保。</p>
            <p>4. <strong>隐私与存储</strong><br>本软件承诺不收集用户的个人隐私信息。所有配置数据及日志均存储于您本地的数据库中，不会上传至任何第三方服务器。</p>
        </div>

        <div class="footer">
            <button class="btn btn-quit" id="quit-btn">拒绝并退出</button>
            <button class="btn btn-agree" id="agree-btn">我已阅读并同意</button>
        </div>
    </div>

    <script>
        // 初始化主题
        const params = new URLSearchParams(window.location.search);
        document.body.setAttribute('data-theme', params.get('theme') || 'dark');

        document.getElementById('quit-btn').addEventListener('click', () => {
            window.electronAPI.closeWindow(); // 退出应用
        });

        document.getElementById('agree-btn').addEventListener('click', async () => {
            const btn = document.getElementById('agree-btn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 正在进入...';
            btn.disabled = true;
            
            // 调用 Main 进程接口：保存状态 -> 关闭此窗口 -> 打开主窗口
            await window.electronAPI.confirmUserAgreement();
        });
    </script>
</body>
</html>